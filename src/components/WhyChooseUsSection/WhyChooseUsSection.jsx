"use client";

import { useEffect, useState, useRef } from "react";
import styled, { css } from "styled-components";

// --- SVG ICON COMPONENTS (inline, so we can control color) ---
const Icon1 = ({ active }) => {
  if (active) {
    return (
      <svg
        width="131"
        height="130"
        viewBox="0 0 131 130"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_418_72)">
          <path
            d="M39.0954 76.4784C34.0673 71.1027 25.4213 73.1684 23.0323 79.7967C22.0748 78.7442 19.6177 76.0366 19.5487 75.9672C19.0028 75.4213 18.7019 74.6952 18.7019 73.9228V43.3299C18.7019 38.4011 14.6919 34.3911 9.76311 34.3911C4.83428 34.3911 0.824341 38.4011 0.824341 43.3299V86.6699C0.824341 89.3994 1.88745 91.9654 3.81713 93.8956C3.89153 93.97 2.8269 92.9909 19.8328 108.565C20.7811 109.532 21.3029 110.808 21.3029 112.164V127.461C21.3029 128.863 22.4399 130 23.842 130H54.3518C55.7539 130 56.8909 128.863 56.8909 127.461V96.5052C56.8909 95.8611 56.6461 95.241 56.2061 94.7708L39.0954 76.4784ZM51.8128 124.922H26.381V112.164C26.381 109.435 25.3184 106.869 23.3882 104.939C23.3034 104.854 23.8998 105.405 7.37258 90.2693C6.42424 89.3024 5.90247 88.0265 5.90247 86.6702V43.3299C5.90247 41.2011 7.63436 39.4692 9.76311 39.4692C11.8919 39.4692 13.6235 41.2011 13.6235 43.3299V73.9228C13.6235 76.0114 14.4231 77.9761 15.8746 79.4711C18.2169 82.0486 30.0403 95.0592 32.3961 97.6516C33.3408 98.6908 34.9465 98.7647 35.9827 97.823C37.0205 96.88 37.0974 95.2743 36.1541 94.2363L28.4344 85.7411C26.9886 83.7995 27.3189 81.0207 29.2692 79.4836C31.1341 78.0132 33.7641 78.2123 35.3868 79.947L51.8128 97.5074V124.922Z"
            fill="black"
          />
          <path
            d="M39.0954 76.4784C34.0673 71.1027 25.4213 73.1684 23.0323 79.7967C22.0748 78.7442 19.6177 76.0366 19.5487 75.9672C19.0028 75.4213 18.7019 74.6952 18.7019 73.9228V43.3299C18.7019 38.4011 14.6919 34.3911 9.76311 34.3911C4.83428 34.3911 0.824341 38.4011 0.824341 43.3299V86.6699C0.824341 89.3994 1.88745 91.9654 3.81713 93.8956C3.89153 93.97 2.8269 92.9909 19.8328 108.565C20.7811 109.532 21.3029 110.808 21.3029 112.164V127.461C21.3029 128.863 22.4399 130 23.842 130H54.3518C55.7539 130 56.8909 128.863 56.8909 127.461V96.5052C56.8909 95.8611 56.6461 95.241 56.2061 94.7708L39.0954 76.4784ZM51.8128 124.922H26.381V112.164C26.381 109.435 25.3184 106.869 23.3882 104.939C23.3034 104.854 23.8998 105.405 7.37258 90.2693C6.42424 89.3024 5.90247 88.0265 5.90247 86.6702V43.3299C5.90247 41.2011 7.63436 39.4692 9.76311 39.4692C11.8919 39.4692 13.6235 41.2011 13.6235 43.3299V73.9228C13.6235 76.0114 14.4231 77.9761 15.8746 79.4711C18.2169 82.0486 30.0403 95.0592 32.3961 97.6516C33.3408 98.6908 34.9465 98.7647 35.9827 97.823C37.0205 96.88 37.0974 95.2743 36.1541 94.2363L28.4344 85.7411C26.9886 83.7995 27.3189 81.0207 29.2692 79.4836C31.1341 78.0132 33.7641 78.2123 35.3868 79.947L51.8128 97.5074V124.922Z"
            fill="white"
          />
          <path
            d="M121.886 34.3911C116.957 34.3911 112.947 38.4011 112.947 43.3299V73.9228C112.947 74.6952 112.646 75.4211 112.1 75.9672C112.035 76.0328 109.267 79.0817 108.617 79.7967C106.228 73.1689 97.5819 71.1029 92.5535 76.4784L75.4425 94.7708C75.0025 95.241 74.7578 95.8611 74.7578 96.5052V127.461C74.7578 128.863 75.8947 130 77.2968 130H107.807C109.209 130 110.346 128.863 110.346 127.461V112.164C110.346 110.808 110.868 109.532 111.816 108.565C128.634 93.163 127.757 93.9707 127.832 93.8958C129.761 91.9656 130.824 89.3996 130.824 86.6702V43.3299C130.824 38.4011 126.814 34.3911 121.886 34.3911ZM125.746 86.6702C125.746 88.0265 125.224 89.3024 124.276 90.2693C107.676 105.471 108.341 104.858 108.26 104.939C106.33 106.869 105.268 109.435 105.268 112.164V124.922H79.8359V97.5076L96.2618 79.9472C97.8843 78.2133 100.514 78.0137 102.379 79.4838C104.327 81.0187 104.662 83.7967 103.214 85.7414L95.4943 94.2366C94.551 95.2745 94.6279 96.8802 95.6657 97.8232C96.7031 98.766 98.3091 98.6901 99.2523 97.6519C101.642 95.0227 113.446 82.0328 115.774 79.4714C117.225 77.9764 118.025 76.0114 118.025 73.923V43.3299C118.025 41.2011 119.757 39.4692 121.886 39.4692C124.014 39.4692 125.746 41.2014 125.746 43.3299V86.6702Z"
            fill="black"
          />
          <path
            d="M121.886 34.3911C116.957 34.3911 112.947 38.4011 112.947 43.3299V73.9228C112.947 74.6952 112.646 75.4211 112.1 75.9672C112.035 76.0328 109.267 79.0817 108.617 79.7967C106.228 73.1689 97.5819 71.1029 92.5535 76.4784L75.4425 94.7708C75.0025 95.241 74.7578 95.8611 74.7578 96.5052V127.461C74.7578 128.863 75.8947 130 77.2968 130H107.807C109.209 130 110.346 128.863 110.346 127.461V112.164C110.346 110.808 110.868 109.532 111.816 108.565C128.634 93.163 127.757 93.9707 127.832 93.8958C129.761 91.9656 130.824 89.3996 130.824 86.6702V43.3299C130.824 38.4011 126.814 34.3911 121.886 34.3911ZM125.746 86.6702C125.746 88.0265 125.224 89.3024 124.276 90.2693C107.676 105.471 108.341 104.858 108.26 104.939C106.33 106.869 105.268 109.435 105.268 112.164V124.922H79.8359V97.5076L96.2618 79.9472C97.8843 78.2133 100.514 78.0137 102.379 79.4838C104.327 81.0187 104.662 83.7967 103.214 85.7414L95.4943 94.2366C94.551 95.2745 94.6279 96.8802 95.6657 97.8232C96.7031 98.766 98.3091 98.6901 99.2523 97.6519C101.642 95.0227 113.446 82.0328 115.774 79.4714C117.225 77.9764 118.025 76.0114 118.025 73.923V43.3299C118.025 41.2011 119.757 39.4692 121.886 39.4692C124.014 39.4692 125.746 41.2014 125.746 43.3299V86.6702Z"
            fill="white"
          />
          <path
            d="M86.9846 23.3599H81.1209C79.7189 23.3599 78.5819 24.4969 78.5819 25.8989V28.4484C78.5819 34.6137 74.1855 39.7706 68.3634 40.9513V28.438H71.0932C72.4952 28.438 73.6322 27.301 73.6322 25.8989C73.6322 24.4969 72.4952 23.3599 71.0932 23.3599H60.8105C59.4084 23.3599 58.2714 24.4969 58.2714 25.8989C58.2714 27.301 59.4084 28.438 60.8105 28.438H63.2853V40.9513C57.4632 39.7708 53.0668 34.6137 53.0668 28.4484V25.8989C53.0668 24.4969 51.9298 23.3599 50.5278 23.3599H44.6641C43.262 23.3599 42.125 24.4969 42.125 25.8989C42.125 27.301 43.262 28.438 44.6641 28.438H47.9887V28.4484C47.9887 37.4207 54.6494 44.8634 63.2853 46.1V51.4036H60.8105C59.4084 51.4036 58.2714 52.5403 58.2714 53.9426C58.2714 55.3447 59.4084 56.4817 60.8105 56.4817H71.0932C72.4952 56.4817 73.6322 55.3447 73.6322 53.9426C73.6322 52.5403 72.4952 51.4036 71.0932 51.4036H68.3634V46.1C76.9993 44.8634 83.66 37.4204 83.66 28.4484L86.9846 28.438C88.3867 28.438 89.5237 27.301 89.5237 25.8989C89.5237 24.4966 88.3867 23.3599 86.9846 23.3599Z"
            fill="black"
          />
          <path
            d="M86.9846 23.3599H81.1209C79.7189 23.3599 78.5819 24.4969 78.5819 25.8989V28.4484C78.5819 34.6137 74.1855 39.7706 68.3634 40.9513V28.438H71.0932C72.4952 28.438 73.6322 27.301 73.6322 25.8989C73.6322 24.4969 72.4952 23.3599 71.0932 23.3599H60.8105C59.4084 23.3599 58.2714 24.4969 58.2714 25.8989C58.2714 27.301 59.4084 28.438 60.8105 28.438H63.2853V40.9513C57.4632 39.7708 53.0668 34.6137 53.0668 28.4484V25.8989C53.0668 24.4969 51.9298 23.3599 50.5278 23.3599H44.6641C43.262 23.3599 42.125 24.4969 42.125 25.8989C42.125 27.301 43.262 28.438 44.6641 28.438H47.9887V28.4484C47.9887 37.4207 54.6494 44.8634 63.2853 46.1V51.4036H60.8105C59.4084 51.4036 58.2714 52.5403 58.2714 53.9426C58.2714 55.3447 59.4084 56.4817 60.8105 56.4817H71.0932C72.4952 56.4817 73.6322 55.3447 73.6322 53.9426C73.6322 52.5403 72.4952 51.4036 71.0932 51.4036H68.3634V46.1C76.9993 44.8634 83.66 37.4204 83.66 28.4484L86.9846 28.438C88.3867 28.438 89.5237 27.301 89.5237 25.8989C89.5237 24.4966 88.3867 23.3599 86.9846 23.3599Z"
            fill="white"
          />
          <path
            d="M102.158 36.3337C102.158 16.299 85.8588 0 65.8243 0C45.7899 0 29.4906 16.299 29.4906 36.3337C29.4906 56.3682 45.7896 72.6675 65.8243 72.6675C85.8591 72.6675 102.158 56.3682 102.158 36.3337ZM65.8243 67.5891C48.5899 67.5891 34.5687 53.5679 34.5687 36.3335C34.5687 19.0993 48.5899 5.07812 65.8243 5.07812C83.0587 5.07812 97.0799 19.0993 97.0799 36.3337C97.0799 53.5681 83.0587 67.5891 65.8243 67.5891Z"
            fill="black"
          />
          <path
            d="M102.158 36.3337C102.158 16.299 85.8588 0 65.8243 0C45.7899 0 29.4906 16.299 29.4906 36.3337C29.4906 56.3682 45.7896 72.6675 65.8243 72.6675C85.8591 72.6675 102.158 56.3682 102.158 36.3337ZM65.8243 67.5891C48.5899 67.5891 34.5687 53.5679 34.5687 36.3335C34.5687 19.0993 48.5899 5.07812 65.8243 5.07812C83.0587 5.07812 97.0799 19.0993 97.0799 36.3337C97.0799 53.5681 83.0587 67.5891 65.8243 67.5891Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="clip0_418_72">
            <rect
              width="130"
              height="130"
              fill="white"
              transform="translate(0.824341)"
            />
          </clipPath>
        </defs>
      </svg>
    );
  } else {
    return (
      <svg
        width="131"
        height="130"
        viewBox="0 0 131 130"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_418_90)">
          <path
            d="M39.0954 76.4715C34.0673 71.0958 25.4213 73.1616 23.0323 79.7898C22.0748 78.7374 19.6177 76.0297 19.5487 75.9604C19.0028 75.4145 18.7019 74.6883 18.7019 73.916V43.323C18.7019 38.3942 14.6919 34.3843 9.76311 34.3843C4.83428 34.3843 0.824341 38.3942 0.824341 43.323V86.6631C0.824341 89.3926 1.88745 91.9585 3.81713 93.8887C3.89153 93.9631 2.8269 92.9841 19.8328 108.558C20.7811 109.525 21.3029 110.801 21.3029 112.157V127.454C21.3029 128.856 22.4399 129.993 23.842 129.993H54.3518C55.7539 129.993 56.8909 128.856 56.8909 127.454V96.4984C56.8909 95.8542 56.6461 95.2342 56.2061 94.7639L39.0954 76.4715ZM51.8128 124.915H26.381V112.158C26.381 109.428 25.3184 106.862 23.3882 104.932C23.3034 104.847 23.8998 105.399 7.37258 90.2624C6.42424 89.2956 5.90247 88.0197 5.90247 86.6633V43.323C5.90247 41.1943 7.63436 39.4624 9.76311 39.4624C11.8919 39.4624 13.6235 41.1943 13.6235 43.323V73.916C13.6235 76.0046 14.4231 77.9693 15.8746 79.4643C18.2169 82.0417 30.0403 95.0524 32.3961 97.6448C33.3408 98.684 34.9465 98.7579 35.9827 97.8162C37.0205 96.8731 37.0974 95.2674 36.1541 94.2295L28.4344 85.7343C26.9886 83.7927 27.3189 81.0139 29.2692 79.4768C31.1341 78.0064 33.7641 78.2055 35.3868 79.9401L51.8128 97.5005V124.915Z"
            fill="url(#paint0_linear_418_90)"
          />
          <path
            d="M121.886 34.3843C116.957 34.3843 112.947 38.3942 112.947 43.323V73.916C112.947 74.6883 112.646 75.4143 112.1 75.9604C112.035 76.0259 109.267 79.0748 108.617 79.7898C106.228 73.1621 97.5819 71.0961 92.5535 76.4715L75.4425 94.7639C75.0025 95.2342 74.7578 95.8542 74.7578 96.4984V127.454C74.7578 128.856 75.8947 129.993 77.2968 129.993H107.807C109.209 129.993 110.346 128.856 110.346 127.454V112.158C110.346 110.801 110.868 109.525 111.816 108.558C128.634 93.1562 127.757 93.9639 127.832 93.889C129.761 91.9588 130.824 89.3928 130.824 86.6633V43.323C130.824 38.3942 126.814 34.3843 121.886 34.3843ZM125.746 86.6633C125.746 88.0197 125.224 89.2956 124.276 90.2624C107.676 105.465 108.341 104.851 108.26 104.932C106.33 106.862 105.268 109.428 105.268 112.158V124.915H79.8359V97.5008L96.2618 79.9404C97.8843 78.2065 100.514 78.0069 102.379 79.477C104.327 81.0119 104.662 83.7899 103.214 85.7345L95.4943 94.2297C94.551 95.2677 94.6279 96.8734 95.6657 97.8164C96.7031 98.7592 98.3091 98.6832 99.2523 97.645C101.642 95.0158 113.446 82.026 115.774 79.4646C117.225 77.9696 118.025 76.0046 118.025 73.9162V43.323C118.025 41.1943 119.757 39.4624 121.886 39.4624C124.014 39.4624 125.746 41.1946 125.746 43.323V86.6633Z"
            fill="url(#paint1_linear_418_90)"
          />
          <path
            d="M86.9846 23.353H81.1209C79.7189 23.353 78.5819 24.49 78.5819 25.8921V28.4416C78.5819 34.6069 74.1855 39.7638 68.3634 40.9444V28.4312H71.0932C72.4952 28.4312 73.6322 27.2942 73.6322 25.8921C73.6322 24.49 72.4952 23.353 71.0932 23.353H60.8105C59.4084 23.353 58.2714 24.49 58.2714 25.8921C58.2714 27.2942 59.4084 28.4312 60.8105 28.4312H63.2853V40.9444C57.4632 39.764 53.0668 34.6069 53.0668 28.4416V25.8921C53.0668 24.49 51.9298 23.353 50.5278 23.353H44.6641C43.262 23.353 42.125 24.49 42.125 25.8921C42.125 27.2942 43.262 28.4312 44.6641 28.4312H47.9887V28.4416C47.9887 37.4138 54.6494 44.8566 63.2853 46.0931V51.3967H60.8105C59.4084 51.3967 58.2714 52.5335 58.2714 53.9358C58.2714 55.3379 59.4084 56.4748 60.8105 56.4748H71.0932C72.4952 56.4748 73.6322 55.3379 73.6322 53.9358C73.6322 52.5335 72.4952 51.3967 71.0932 51.3967H68.3634V46.0931C76.9993 44.8566 83.66 37.4136 83.66 28.4416L86.9846 28.4312C88.3867 28.4312 89.5237 27.2942 89.5237 25.8921C89.5237 24.4898 88.3867 23.353 86.9846 23.353Z"
            fill="url(#paint2_linear_418_90)"
          />
          <path
            d="M102.158 36.3269C102.158 16.2922 85.8588 -0.00683594 65.8243 -0.00683594C45.7899 -0.00683594 29.4906 16.2922 29.4906 36.3269C29.4906 56.3614 45.7896 72.6606 65.8243 72.6606C85.8591 72.6606 102.158 56.3614 102.158 36.3269ZM65.8243 67.5822C48.5899 67.5822 34.5687 53.561 34.5687 36.3266C34.5687 19.0925 48.5899 5.07129 65.8243 5.07129C83.0587 5.07129 97.0799 19.0925 97.0799 36.3269C97.0799 53.5613 83.0587 67.5822 65.8243 67.5822Z"
            fill="url(#paint3_linear_418_90)"
          />
        </g>
        <defs>
          <linearGradient
            id="paint0_linear_418_90"
            x1="15.2644"
            y1="117.361"
            x2="42.9181"
            y2="117.063"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#539CD0" />
            <stop offset="1" stop-color="#75C1E5" />
          </linearGradient>
          <linearGradient
            id="paint1_linear_418_90"
            x1="89.1978"
            y1="117.361"
            x2="116.852"
            y2="117.063"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#539CD0" />
            <stop offset="1" stop-color="#75C1E5" />
          </linearGradient>
          <linearGradient
            id="paint2_linear_418_90"
            x1="54.3326"
            y1="52.0987"
            x2="77.6977"
            y2="51.4844"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#539CD0" />
            <stop offset="1" stop-color="#75C1E5" />
          </linearGradient>
          <linearGradient
            id="paint3_linear_418_90"
            x1="48.2063"
            y1="63.0595"
            x2="84.0401"
            y2="62.4012"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#539CD0" />
            <stop offset="1" stop-color="#75C1E5" />
          </linearGradient>
          <clipPath id="clip0_418_90">
            <rect
              width="130"
              height="130"
              fill="white"
              transform="translate(0.824341 -0.00683594)"
            />
          </clipPath>
        </defs>
      </svg>
    );
  }
};
const Icon2 = ({ active }) => {
  if (!active) {
    return (
      <svg
        width="201"
        height="200"
        viewBox="0 0 201 200"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M179.095 129.299H170.073C167.916 129.299 166.07 131.183 166.07 133.341V137.264C166.07 146.749 159.429 154.684 150.444 156.5V137.112H154.645C156.802 137.112 158.552 135.363 158.552 133.205C158.552 131.048 156.802 129.299 154.645 129.299H138.824C136.667 129.299 134.918 131.048 134.918 133.205C134.918 135.363 136.667 137.112 138.824 137.112H142.631V156.5C133.646 154.683 127.004 146.749 127.004 137.263V133.341C127.004 131.183 125.161 129.299 123.004 129.299H113.982C111.825 129.299 110.076 131.048 110.076 133.205C110.076 135.362 111.825 137.112 113.982 137.112H119.191V137.263C119.191 151.068 129.348 162.519 142.631 164.422V172.661H138.824C136.667 172.661 134.918 174.411 134.918 176.568C134.918 178.725 136.667 180.474 138.824 180.474H154.645C156.802 180.474 158.552 178.725 158.552 176.568C158.552 174.411 156.802 172.661 154.645 172.661H150.444V164.422C163.726 162.519 173.979 151.068 173.979 137.263L179.095 137.247C181.252 137.247 183.001 135.43 183.001 133.273C183.002 131.116 181.253 129.299 179.095 129.299Z"
          fill="url(#paint0_linear_418_96)"
        />
        <path
          d="M77.5565 79.5865C75.2552 81.8871 71.5124 81.8871 69.213 79.5865C67.6871 78.0614 65.2143 78.0614 63.688 79.5865C62.1625 81.112 62.1625 83.5856 63.688 85.1115C69.0337 90.4576 77.7335 90.4587 83.0807 85.1115C84.6066 83.586 84.6066 81.1128 83.0811 79.5869C81.556 78.0618 79.082 78.0614 77.5565 79.5865Z"
          fill="url(#paint1_linear_418_96)"
        />
        <path
          d="M59.6553 66.6418C61.8128 66.6418 63.5618 64.8928 63.5618 62.7353C63.5618 60.5778 61.8128 58.8288 59.6553 58.8288C57.4978 58.8288 55.7487 60.5778 55.7487 62.7353C55.7487 64.8928 57.4978 66.6418 59.6553 66.6418Z"
          fill="url(#paint2_linear_418_96)"
        />
        <path
          d="M87.1143 66.6418C89.2718 66.6418 91.0208 64.8928 91.0208 62.7353C91.0208 60.5778 89.2718 58.8288 87.1143 58.8288C84.9567 58.8288 83.2077 60.5778 83.2077 62.7353C83.2077 64.8928 84.9567 66.6418 87.1143 66.6418Z"
          fill="url(#paint3_linear_418_96)"
        />
        <path
          d="M146.489 91.3865C139.347 91.3865 132.474 92.7749 126.224 95.2915V52.9304C126.224 23.4823 102.461 -0.00683594 73.3117 -0.00683594C44.1222 -0.00683594 20.3569 23.7405 20.3569 52.9304V129.761C8.24672 138.316 0.824341 152.176 0.824341 167.27V196.1C0.824341 198.257 2.58462 200.007 4.7418 200.007H146.539C176.486 200.007 200.824 175.643 200.824 145.697C200.824 115.75 176.436 91.3865 146.489 91.3865ZM73.3336 7.8062C98.1263 7.8062 118.41 27.8369 118.41 52.9304V99.1949C109.816 104.534 102.497 112.501 97.8818 121.486H89.1112V106.327C101.612 100.398 110.597 87.4851 110.597 72.5427V47.0468C110.597 44.8896 108.865 43.1403 106.708 43.1403C97.6665 43.1403 88.9561 39.8525 82.1662 33.883L75.9596 28.4228C74.4782 27.1208 72.2609 27.1267 70.7873 28.4373L64.8143 33.6599C58.0001 39.717 49.228 42.9649 40.1114 42.9649H40.0438C37.8866 42.9649 35.983 44.8896 35.983 47.0468V72.5427C35.983 87.4851 44.968 100.398 57.8595 106.327V121.486H46.5157C40.1899 121.486 34.0293 122.895 28.1696 125.392V52.9304C28.17 28.0486 48.4522 7.8062 73.3336 7.8062ZM73.2898 101.977C57.0598 101.977 43.796 88.7727 43.796 72.5423V50.7896C53.5623 49.9673 62.6442 46.0615 69.9287 39.5865L73.3605 36.5703L76.9795 39.7502C84.2132 46.11 93.4084 49.9544 102.784 50.7834V72.5419C102.784 88.7731 89.5202 101.977 73.2898 101.977ZM65.6725 108.953C68.0164 109.5 70.7893 109.791 73.4852 109.791C76.1814 109.791 78.564 109.5 81.2986 108.953V124.083C77.3921 128.601 69.579 128.607 65.6725 124.083V108.953ZM32.0765 192.194V176.488C32.0765 174.331 30.3271 172.582 28.17 172.582C26.0128 172.582 24.2634 174.331 24.2634 176.488V192.194H8.63737V167.27C8.63737 145.805 26.1628 129.299 46.5161 129.299H59.6565C59.7045 129.299 59.751 129.345 59.7987 129.344C67.1398 137.225 79.5914 137.253 86.9716 129.331C87.0193 129.332 87.0658 129.299 87.1138 129.299H94.7272C93.1053 134.378 92.2286 139.971 92.2286 145.645C92.2286 165.34 102.767 182.671 118.501 192.194H32.0765V192.194ZM146.539 192.194C120.9 192.194 100.042 171.335 100.042 145.697C100.042 120.059 120.901 99.1999 146.539 99.1999C172.177 99.1999 193.036 120.059 193.036 145.697C193.036 171.335 172.177 192.194 146.539 192.194Z"
          fill="url(#paint4_linear_418_96)"
        />
        <defs>
          <linearGradient
            id="paint0_linear_418_96"
            x1="128.858"
            y1="173.713"
            x2="164.806"
            y2="172.772"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#539CD0" />
            <stop offset="1" stop-color="#75C1E5" />
          </linearGradient>
          <linearGradient
            id="paint1_linear_418_96"
            x1="68.128"
            y1="87.7106"
            x2="78.8082"
            y2="87.3122"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#539CD0" />
            <stop offset="1" stop-color="#75C1E5" />
          </linearGradient>
          <linearGradient
            id="paint2_linear_418_96"
            x1="57.761"
            y1="65.6095"
            x2="61.6138"
            y2="65.5388"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#539CD0" />
            <stop offset="1" stop-color="#75C1E5" />
          </linearGradient>
          <linearGradient
            id="paint3_linear_418_96"
            x1="85.22"
            y1="65.6095"
            x2="89.0728"
            y2="65.5388"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#539CD0" />
            <stop offset="1" stop-color="#75C1E5" />
          </linearGradient>
          <linearGradient
            id="paint4_linear_418_96"
            x1="52.3348"
            y1="173.58"
            x2="150.959"
            y2="171.768"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#539CD0" />
            <stop offset="1" stop-color="#75C1E5" />
          </linearGradient>
        </defs>
      </svg>
    );
  } else {
    return (
      <svg
        width="201"
        height="201"
        viewBox="0 0 201 201"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M179.095 129.306H170.073C167.916 129.306 166.07 131.19 166.07 133.348V137.27C166.07 146.756 159.429 154.691 150.444 156.507V137.119H154.645C156.802 137.119 158.552 135.369 158.552 133.212C158.552 131.055 156.802 129.306 154.645 129.306H138.824C136.667 129.306 134.918 131.055 134.918 133.212C134.918 135.369 136.667 137.119 138.824 137.119H142.631V156.507C133.646 154.69 127.004 146.756 127.004 137.27V133.347C127.004 131.19 125.161 129.305 123.004 129.305H113.982C111.825 129.305 110.076 131.055 110.076 133.212C110.076 135.369 111.825 137.118 113.982 137.118H119.191V137.27C119.191 151.075 129.348 162.526 142.631 164.429V172.668H138.824C136.667 172.668 134.918 174.417 134.918 176.575C134.918 178.732 136.667 180.481 138.824 180.481H154.645C156.802 180.481 158.552 178.732 158.552 176.575C158.552 174.417 156.802 172.668 154.645 172.668H150.444V164.429C163.726 162.526 173.979 151.075 173.979 137.27L179.095 137.254C181.252 137.254 183.001 135.437 183.001 133.28C183.002 131.123 181.253 129.306 179.095 129.306Z"
          fill="white"
        />
        <path
          d="M77.5565 79.5934C75.2552 81.8939 71.5124 81.8939 69.213 79.5934C67.6871 78.0682 65.2143 78.0682 63.688 79.5934C62.1625 81.1188 62.1625 83.5925 63.688 85.1183C69.0337 90.4644 77.7335 90.4656 83.0807 85.1183C84.6066 83.5928 84.6066 81.1196 83.0811 79.5937C81.556 78.0686 79.082 78.0682 77.5565 79.5934Z"
          fill="white"
        />
        <path
          d="M59.6553 66.6487C61.8128 66.6487 63.5618 64.8997 63.5618 62.7421C63.5618 60.5846 61.8128 58.8356 59.6553 58.8356C57.4978 58.8356 55.7487 60.5846 55.7487 62.7421C55.7487 64.8997 57.4978 66.6487 59.6553 66.6487Z"
          fill="white"
        />
        <path
          d="M87.1143 66.6487C89.2718 66.6487 91.0208 64.8997 91.0208 62.7421C91.0208 60.5846 89.2718 58.8356 87.1143 58.8356C84.9567 58.8356 83.2077 60.5846 83.2077 62.7421C83.2077 64.8997 84.9567 66.6487 87.1143 66.6487Z"
          fill="white"
        />
        <path
          d="M146.489 91.3934C139.347 91.3934 132.474 92.7817 126.224 95.2983V52.9372C126.224 23.4891 102.461 0 73.3117 0C44.1222 0 20.3569 23.7473 20.3569 52.9372V129.767C8.24672 138.323 0.824341 152.183 0.824341 167.277V196.107C0.824341 198.264 2.58462 200.014 4.7418 200.014H146.539C176.486 200.014 200.824 175.65 200.824 145.704C200.824 115.757 176.436 91.3934 146.489 91.3934ZM73.3336 7.81303C98.1263 7.81303 118.41 27.8437 118.41 52.9372V99.2017C109.816 104.541 102.497 112.508 97.8818 121.493H89.1112V106.334C101.612 100.405 110.597 87.4919 110.597 72.5495V47.0536C110.597 44.8964 108.865 43.1471 106.708 43.1471C97.6665 43.1471 88.9561 39.8594 82.1662 33.8898L75.9596 28.4297C74.4782 27.1276 72.2609 27.1335 70.7873 28.4441L64.8143 33.6668C58.0001 39.7238 49.228 42.9717 40.1114 42.9717H40.0438C37.8866 42.9717 35.983 44.8964 35.983 47.0536V72.5495C35.983 87.4919 44.968 100.405 57.8595 106.334V121.493H46.5157C40.1899 121.493 34.0293 122.901 28.1696 125.398V52.9372C28.17 28.0554 48.4522 7.81303 73.3336 7.81303ZM73.2898 101.984C57.0598 101.984 43.796 88.7795 43.796 72.5491V50.7964C53.5623 49.9741 62.6442 46.0684 69.9287 39.5933L73.3605 36.5771L76.9795 39.757C84.2132 46.1168 93.4084 49.9612 102.784 50.7902V72.5487C102.784 88.7799 89.5202 101.984 73.2898 101.984ZM65.6725 108.96C68.0164 109.507 70.7893 109.797 73.4852 109.797C76.1814 109.797 78.564 109.507 81.2986 108.96V124.09C77.3921 128.608 69.579 128.613 65.6725 124.09V108.96ZM32.0765 192.201V176.495C32.0765 174.338 30.3271 172.588 28.17 172.588C26.0128 172.588 24.2634 174.338 24.2634 176.495V192.201H8.63737V167.277C8.63737 145.812 26.1628 129.306 46.5161 129.306H59.6565C59.7045 129.306 59.751 129.352 59.7987 129.351C67.1398 137.232 79.5914 137.259 86.9716 129.338C87.0193 129.339 87.0658 129.306 87.1138 129.306H94.7272C93.1053 134.385 92.2286 139.978 92.2286 145.652C92.2286 165.347 102.767 182.678 118.501 192.201H32.0765V192.201ZM146.539 192.201C120.9 192.201 100.042 171.342 100.042 145.704C100.042 120.066 120.901 99.2068 146.539 99.2068C172.177 99.2068 193.036 120.066 193.036 145.704C193.036 171.342 172.177 192.201 146.539 192.201Z"
          fill="white"
        />
      </svg>
    );
  }
};
const Icon3 = ({ active }) => {
  if (active) {
    return (
      <svg
        width="131"
        height="130"
        viewBox="0 0 131 130"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_418_84)">
          <path
            d="M128.285 26.7483C129.687 26.7483 130.824 25.6113 130.824 24.2092V14.0116C130.824 12.6093 129.687 11.4725 128.285 11.4725H3.3634C1.96108 11.4725 0.824341 12.6093 0.824341 14.0116V24.2092C0.824341 25.6113 1.96108 26.7483 3.3634 26.7483H11.022V67.8803C6.62914 69.0115 3.37381 73.0062 3.37381 77.7471C3.37381 82.4881 6.62914 86.4828 11.022 87.6139V98.1528H10.9806C5.38043 98.1528 0.824341 102.709 0.824341 108.309V115.988C0.824341 117.391 1.96108 118.528 3.3634 118.528H128.285C129.687 118.528 130.824 117.391 130.824 115.988V108.309C130.824 102.709 126.268 98.1528 120.668 98.1528H120.627V26.7483H128.285ZM5.90247 16.5507H125.746V21.6702C119.923 21.6702 16.4779 21.6702 5.90247 21.6702V16.5507ZM100.242 72.638C103.059 72.638 105.351 74.9298 105.351 77.7471C105.351 80.5645 103.059 82.8562 100.242 82.8562C97.4242 82.8562 95.1325 80.5645 95.1325 77.7471C95.1325 74.9298 97.4242 72.638 100.242 72.638ZM97.7025 67.8803C95.6934 68.3976 93.9241 69.5158 92.5934 71.0288C91.2627 69.5158 89.4932 68.3976 87.4841 67.8803V26.7483H97.7025V67.8803ZM39.0553 72.638C41.8726 72.638 44.1646 74.9298 44.1646 77.7471C44.1646 80.5645 41.8726 82.8562 39.0553 82.8562C36.2379 82.8562 33.9462 80.5645 33.9462 77.7471C33.9462 74.9298 36.2382 72.638 39.0553 72.638ZM41.5943 67.8803V26.7483H51.8128V67.8803C49.8036 68.3976 48.0344 69.5158 46.7037 71.0288C45.373 69.5158 43.6037 68.3976 41.5943 67.8803ZM54.3518 72.638C57.1692 72.638 59.4609 74.9298 59.4609 77.7471C59.4609 80.5645 57.1692 82.8562 54.3518 82.8562C51.5345 82.8562 49.2427 80.5645 49.2427 77.7471C49.2427 74.9298 51.5347 72.638 54.3518 72.638ZM56.8909 67.8803V26.7483H67.1094V67.8803C65.0999 68.3976 63.3307 69.5158 62 71.0288C60.6695 69.5158 58.9003 68.3976 56.8909 67.8803ZM69.6484 72.638C72.4658 72.638 74.7575 74.9298 74.7575 77.7471C74.7575 80.5645 72.4658 82.8562 69.6484 82.8562C66.8311 82.8562 64.5391 80.5645 64.5391 77.7471C64.5391 74.9298 66.8313 72.638 69.6484 72.638ZM72.1875 67.8803V26.7483H82.4057V67.8803C80.3965 68.3976 78.6273 69.5158 77.2966 71.0288C75.9661 69.5158 74.1969 68.3976 72.1875 67.8803ZM84.945 72.638C87.7623 72.638 90.0544 74.9298 90.0544 77.7471C90.0544 80.5645 87.7623 82.8562 84.945 82.8562C82.1277 82.8562 79.8359 80.5645 79.8359 77.7471C79.8359 74.9298 82.1277 72.638 84.945 72.638ZM24.1464 26.7483L16.1001 53.0934V26.7483H24.1464ZM8.45194 77.7471C8.45194 74.9326 10.7394 72.6429 13.5529 72.6383C16.5358 72.6693 18.6704 75.0522 18.6704 77.7471C18.6704 80.5645 16.3784 82.8562 13.561 82.8562C10.7437 82.8562 8.45194 80.5645 8.45194 77.7471ZM125.746 108.309V113.449H5.90247V108.309C5.90247 105.509 8.18051 103.231 10.9806 103.231H120.668C123.468 103.231 125.746 105.509 125.746 108.309ZM115.549 98.1528H16.1001V87.6139C20.4929 86.4828 23.7485 82.4878 23.7485 77.7471C23.7485 73.2721 20.8464 69.4642 16.8263 68.0997L29.4558 26.748H36.5162V67.8801C32.1234 69.0112 28.868 73.006 28.868 77.7469C28.868 83.3641 33.4381 87.9341 39.0553 87.9341C42.1001 87.9341 44.8352 86.5897 46.7037 84.4653C50.7685 89.0869 57.9294 89.0937 62 84.4653C66.0732 89.0962 73.2341 89.0846 77.2966 84.4653C81.3695 89.0962 88.5307 89.0843 92.5932 84.4653C94.4614 86.5897 97.1967 87.9341 100.241 87.9341C105.859 87.9341 110.429 83.3641 110.429 77.7469C110.429 73.006 107.173 69.011 102.78 67.8801V26.7483H115.548V98.1528H115.549Z"
            fill="black"
          />
          <path
            d="M128.285 26.7483C129.687 26.7483 130.824 25.6113 130.824 24.2092V14.0116C130.824 12.6093 129.687 11.4725 128.285 11.4725H3.3634C1.96108 11.4725 0.824341 12.6093 0.824341 14.0116V24.2092C0.824341 25.6113 1.96108 26.7483 3.3634 26.7483H11.022V67.8803C6.62914 69.0115 3.37381 73.0062 3.37381 77.7471C3.37381 82.4881 6.62914 86.4828 11.022 87.6139V98.1528H10.9806C5.38043 98.1528 0.824341 102.709 0.824341 108.309V115.988C0.824341 117.391 1.96108 118.528 3.3634 118.528H128.285C129.687 118.528 130.824 117.391 130.824 115.988V108.309C130.824 102.709 126.268 98.1528 120.668 98.1528H120.627V26.7483H128.285ZM5.90247 16.5507H125.746V21.6702C119.923 21.6702 16.4779 21.6702 5.90247 21.6702V16.5507ZM100.242 72.638C103.059 72.638 105.351 74.9298 105.351 77.7471C105.351 80.5645 103.059 82.8562 100.242 82.8562C97.4242 82.8562 95.1325 80.5645 95.1325 77.7471C95.1325 74.9298 97.4242 72.638 100.242 72.638ZM97.7025 67.8803C95.6934 68.3976 93.9241 69.5158 92.5934 71.0288C91.2627 69.5158 89.4932 68.3976 87.4841 67.8803V26.7483H97.7025V67.8803ZM39.0553 72.638C41.8726 72.638 44.1646 74.9298 44.1646 77.7471C44.1646 80.5645 41.8726 82.8562 39.0553 82.8562C36.2379 82.8562 33.9462 80.5645 33.9462 77.7471C33.9462 74.9298 36.2382 72.638 39.0553 72.638ZM41.5943 67.8803V26.7483H51.8128V67.8803C49.8036 68.3976 48.0344 69.5158 46.7037 71.0288C45.373 69.5158 43.6037 68.3976 41.5943 67.8803ZM54.3518 72.638C57.1692 72.638 59.4609 74.9298 59.4609 77.7471C59.4609 80.5645 57.1692 82.8562 54.3518 82.8562C51.5345 82.8562 49.2427 80.5645 49.2427 77.7471C49.2427 74.9298 51.5347 72.638 54.3518 72.638ZM56.8909 67.8803V26.7483H67.1094V67.8803C65.0999 68.3976 63.3307 69.5158 62 71.0288C60.6695 69.5158 58.9003 68.3976 56.8909 67.8803ZM69.6484 72.638C72.4658 72.638 74.7575 74.9298 74.7575 77.7471C74.7575 80.5645 72.4658 82.8562 69.6484 82.8562C66.8311 82.8562 64.5391 80.5645 64.5391 77.7471C64.5391 74.9298 66.8313 72.638 69.6484 72.638ZM72.1875 67.8803V26.7483H82.4057V67.8803C80.3965 68.3976 78.6273 69.5158 77.2966 71.0288C75.9661 69.5158 74.1969 68.3976 72.1875 67.8803ZM84.945 72.638C87.7623 72.638 90.0544 74.9298 90.0544 77.7471C90.0544 80.5645 87.7623 82.8562 84.945 82.8562C82.1277 82.8562 79.8359 80.5645 79.8359 77.7471C79.8359 74.9298 82.1277 72.638 84.945 72.638ZM24.1464 26.7483L16.1001 53.0934V26.7483H24.1464ZM8.45194 77.7471C8.45194 74.9326 10.7394 72.6429 13.5529 72.6383C16.5358 72.6693 18.6704 75.0522 18.6704 77.7471C18.6704 80.5645 16.3784 82.8562 13.561 82.8562C10.7437 82.8562 8.45194 80.5645 8.45194 77.7471ZM125.746 108.309V113.449H5.90247V108.309C5.90247 105.509 8.18051 103.231 10.9806 103.231H120.668C123.468 103.231 125.746 105.509 125.746 108.309ZM115.549 98.1528H16.1001V87.6139C20.4929 86.4828 23.7485 82.4878 23.7485 77.7471C23.7485 73.2721 20.8464 69.4642 16.8263 68.0997L29.4558 26.748H36.5162V67.8801C32.1234 69.0112 28.868 73.006 28.868 77.7469C28.868 83.3641 33.4381 87.9341 39.0553 87.9341C42.1001 87.9341 44.8352 86.5897 46.7037 84.4653C50.7685 89.0869 57.9294 89.0937 62 84.4653C66.0732 89.0962 73.2341 89.0846 77.2966 84.4653C81.3695 89.0962 88.5307 89.0843 92.5932 84.4653C94.4614 86.5897 97.1967 87.9341 100.241 87.9341C105.859 87.9341 110.429 83.3641 110.429 77.7469C110.429 73.006 107.173 69.011 102.78 67.8801V26.7483H115.548V98.1528H115.549Z"
            fill="white"
          />
        </g>
        <defs>
          <clipPath id="clip0_418_84">
            <rect
              width="130"
              height="130"
              fill="white"
              transform="translate(0.824341)"
            />
          </clipPath>
        </defs>
      </svg>
    );
  } else {
    return (
      <svg
        width="131"
        height="130"
        viewBox="0 0 131 130"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_418_87)">
          <path
            d="M128.285 26.7482C129.687 26.7482 130.824 25.6112 130.824 24.2092V14.0115C130.824 12.6092 129.687 11.4725 128.285 11.4725H3.3634C1.96108 11.4725 0.824341 12.6092 0.824341 14.0115V24.2092C0.824341 25.6112 1.96108 26.7482 3.3634 26.7482H11.022V67.8803C6.62914 69.0114 3.37381 73.0061 3.37381 77.7471C3.37381 82.488 6.62914 86.4827 11.022 87.6139V98.1528H10.9806C5.38043 98.1528 0.824341 102.709 0.824341 108.309V115.988C0.824341 117.39 1.96108 118.527 3.3634 118.527H128.285C129.687 118.527 130.824 117.39 130.824 115.988V108.309C130.824 102.709 126.268 98.1528 120.668 98.1528H120.627V26.7482H128.285ZM5.90247 16.5506H125.746V21.6701C119.923 21.6701 16.4779 21.6701 5.90247 21.6701V16.5506ZM100.242 72.638C103.059 72.638 105.351 74.9297 105.351 77.7471C105.351 80.5644 103.059 82.8562 100.242 82.8562C97.4242 82.8562 95.1325 80.5644 95.1325 77.7471C95.1325 74.9297 97.4242 72.638 100.242 72.638ZM97.7025 67.8803C95.6934 68.3975 93.9241 69.5157 92.5934 71.0287C91.2627 69.5157 89.4932 68.3975 87.4841 67.8803V26.7482H97.7025V67.8803ZM39.0553 72.638C41.8726 72.638 44.1646 74.9297 44.1646 77.7471C44.1646 80.5644 41.8726 82.8562 39.0553 82.8562C36.2379 82.8562 33.9462 80.5644 33.9462 77.7471C33.9462 74.9297 36.2382 72.638 39.0553 72.638ZM41.5943 67.8803V26.7482H51.8128V67.8803C49.8036 68.3975 48.0344 69.5157 46.7037 71.0287C45.373 69.5157 43.6037 68.3975 41.5943 67.8803ZM54.3518 72.638C57.1692 72.638 59.4609 74.9297 59.4609 77.7471C59.4609 80.5644 57.1692 82.8562 54.3518 82.8562C51.5345 82.8562 49.2427 80.5644 49.2427 77.7471C49.2427 74.9297 51.5347 72.638 54.3518 72.638ZM56.8909 67.8803V26.7482H67.1094V67.8803C65.0999 68.3975 63.3307 69.5157 62 71.0287C60.6695 69.5157 58.9003 68.3975 56.8909 67.8803ZM69.6484 72.638C72.4658 72.638 74.7575 74.9297 74.7575 77.7471C74.7575 80.5644 72.4658 82.8562 69.6484 82.8562C66.8311 82.8562 64.5391 80.5644 64.5391 77.7471C64.5391 74.9297 66.8313 72.638 69.6484 72.638ZM72.1875 67.8803V26.7482H82.4057V67.8803C80.3965 68.3975 78.6273 69.5157 77.2966 71.0287C75.9661 69.5157 74.1969 68.3975 72.1875 67.8803ZM84.945 72.638C87.7623 72.638 90.0544 74.9297 90.0544 77.7471C90.0544 80.5644 87.7623 82.8562 84.945 82.8562C82.1277 82.8562 79.8359 80.5644 79.8359 77.7471C79.8359 74.9297 82.1277 72.638 84.945 72.638ZM24.1464 26.7482L16.1001 53.0933V26.7482H24.1464ZM8.45194 77.7471C8.45194 74.9325 10.7394 72.6428 13.5529 72.6382C16.5358 72.6692 18.6704 75.0521 18.6704 77.7471C18.6704 80.5644 16.3784 82.8562 13.561 82.8562C10.7437 82.8562 8.45194 80.5644 8.45194 77.7471ZM125.746 108.309V113.449H5.90247V108.309C5.90247 105.509 8.18051 103.231 10.9806 103.231H120.668C123.468 103.231 125.746 105.509 125.746 108.309ZM115.549 98.1528H16.1001V87.6139C20.4929 86.4827 23.7485 82.4878 23.7485 77.7471C23.7485 73.272 20.8464 69.4642 16.8263 68.0997L29.4558 26.748H36.5162V67.88C32.1234 69.0112 28.868 73.0059 28.868 77.7468C28.868 83.364 33.4381 87.9341 39.0553 87.9341C42.1001 87.9341 44.8352 86.5896 46.7037 84.4652C50.7685 89.0868 57.9294 89.0936 62 84.4652C66.0732 89.0962 73.2341 89.0845 77.2966 84.4652C81.3695 89.0962 88.5307 89.0843 92.5932 84.4652C94.4614 86.5896 97.1967 87.9341 100.241 87.9341C105.859 87.9341 110.429 83.364 110.429 77.7468C110.429 73.0059 107.173 69.0109 102.78 67.88V26.7482H115.548V98.1528H115.549Z"
            fill="url(#paint0_linear_418_87)"
          />
        </g>
        <defs>
          <linearGradient
            id="paint0_linear_418_87"
            x1="34.3061"
            y1="104.383"
            x2="98.4016"
            y2="102.953"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#539CD0" />
            <stop offset="1" stop-color="#75C1E5" />
          </linearGradient>
          <clipPath id="clip0_418_87">
            <rect
              width="130"
              height="130"
              fill="white"
              transform="translate(0.824341)"
            />
          </clipPath>
        </defs>
      </svg>
    );
  }
};

const slides = [
  {
    title: "Профессионализм",
    text: "Программа дается исключительно офлайн с практикой от лучших специалистов, что позволяет изучить курс максимально качественно.",
    icon: Icon1,
  },
  {
    title: "Комплексный подход",
    text: "Мы сочетаем теорию, практику и исследовательскую деятельность в рамках каждой программы.",
    icon: Icon2,
  },
  {
    title: "Экспертная команда",
    text: "Наш преподавательский состав включает докторов наук, врачей-остеопатов и практикующих специалистов.",
    icon: Icon3,
  },
];

const Section = styled.section`
  padding: 80px 0 100px 0;
  background: var(--background);
  text-align: center;
  position: relative;
  overflow: hidden;
`;

const Title = styled.h2`
  font-size: 28px;
  font-family: "Manrope";
  font-weight: 700;
  margin-bottom: 40px;
`;

const SlidesWrapper = styled.div`
  position: relative;
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  min-height: 520px;
  height: 520px;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  background: transparent;
  @media (max-width: 1023px) {
    min-height: 380px;
    height: 380px;
    max-width: 98vw;
  }
  @media (max-width: 767px) {
    min-height: 320px;
    height: 320px;
    max-width: 100vw;
  }
`;

const SlideStyled = styled.div`
  position: absolute;
  top: 50%;
  left: 50%;
  width: 600px;
  min-width: 260px;
  max-width: 600px;
  margin: 0;
  background: #fff;
  border-radius: 32px;
  padding: 56px 0 56px 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow: none;
  color: #333;
  opacity: 0;
  pointer-events: none;
  z-index: 0;
  transform: translate(-50%, -50%) scale(0.8);
  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    background 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    border 0.5s cubic-bezier(0.4, 0, 0.2, 1);

  ${({ $offset }) =>
    $offset === 0 &&
    css`
      width: 500px;
      height: 520px;
      background: linear-gradient(88.95deg, #539cd0 25.53%, #75c1e5 73.97%);
      color: #fff;
      opacity: 1;
      z-index: 2;
      pointer-events: auto;
      transform: translate(-50%, -50%) scale(1.08);
      min-height: 420px;
      max-width: 95vw;
    `}
  ${({ $offset }) =>
    $offset === -1 &&
    css`
      opacity: 1;
      z-index: 1;
      pointer-events: auto;
      /* Chap va o'ng slaydlar borderlari active bilan yopishib turishi uchun margin yo'q, width bir xil */
      transform: translate(calc(-50% - 500px), -50%) scale(1);
      min-height: 420px;
      background: #fff;
      color: #222;
      box-shadow: none;
      border: 1px solid rgba(83, 156, 208, 1);
      );
    `}
  ${({ $offset }) =>
    $offset === 1 &&
    css`
      opacity: 1;
      z-index: 1;
      pointer-events: auto;
      transform: translate(calc(-50% + 500px), -50%) scale(1);
      min-height: 420px;
      background: #fff;
      color: #222;
      box-shadow: none;
      border: 1px solid rgba(83, 156, 208, 1);
    `}
  ${({ $offset }) =>
    Math.abs($offset) > 1 &&
    css`
      opacity: 0;
      pointer-events: none;
      z-index: 0;
      transform: translate(-50%, -50%) scale(0.8);
    `}

  img,
  svg {
    width: 100px;
    height: 100px;
    margin-bottom: 32px;
    flex-shrink: 0;
    @media (max-width: 1023px) {
      width: 70px;
      height: 70px;
      margin-bottom: 20px;
    }
    @media (max-width: 767px) {
      width: 38px;
      height: 38px;
      margin-bottom: 8px;
    }
  }

  h3 {
    font-size: 35px;
    font-weight: 700;
    margin-bottom: 18px;
    font-family: "Manrope", sans-serif;
    line-height: 100%;

    @media (max-width: 1023px) {
      font-size: 20px;
      margin-bottom: 12px;
    }
    @media (max-width: 767px) {
      font-size: 18px;
      margin-bottom: 8px;
    }
  }

  p {
    font-size: 18px;
    font-family: "Manrope", sans-serif;
    max-width: 340px;
    text-align: center;
    margin: 0 auto;
    line-height: 120%;

    @media (max-width: 1023px) {
      font-size: 15px;
      max-width: 90vw;
    }
    @media (max-width: 767px) {
      font-size: 13px;
      max-width: 90vw;
    }
  }

  @media (max-width: 1023px) {
    width: 60vw;
    max-width: 95vw;
    padding: 32px 10px;
    min-height: 380px;
    height: 380px;
  }

  @media (max-width: 1000px) {
    position: absolute;
    width: 90vw;
    max-width: 95vw;
    left: 50%;
    top: 50%;
    padding: 18px 4vw;
    min-height: 325px;
    height: 325px;
    h3 {
      font-size: 16px;
    }
    p {
      font-size: 13px;
    }
    img,
    svg {
      width: 80px;
      height: 80px;
      margin-bottom: 8px;
    }
    ${({ $offset }) =>
      $offset === 0 &&
      css`
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
        pointer-events: auto;
        z-index: 2;
        height: 180px;
      `}
    ${({ $offset }) =>
      $offset === 1 &&
      css`
        opacity: 0.5;
        z-index: 1;
        pointer-events: none;
        transform: translate(calc(-50% + 44vw), -50%) scale(0.92);
        display: block;
        min-height: 325px;
        height: 325px;
      `}
    ${({ $offset }) =>
      $offset === -1 &&
      css`
        opacity: 0.5;
        z-index: 1;
        pointer-events: none;
        transform: translate(calc(-50% - 44vw), -50%) scale(0.92);
        display: block;
        height: 325px;
        height: 325px;
      `}
    ${({ $offset }) =>
      Math.abs($offset) > 1 &&
      css`
        display: none;
      `}
  }
`;

const ArrowsRow = styled.div`
  display: flex;
  gap: 16px;
  justify-content: center;
  align-items: center;
  margin-top: 32px;
  @media (max-width: 767px) {
    margin-top: 18px;
    gap: 10px;
  }
`;

const ArrowButton = styled.button`
  background: #f9fbfc;
  border: 1.5px solid #b3d8f0;
  color: #539cd0;
  border-radius: 12px;
  padding: 15px 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  cursor: pointer;
  transition: background 0.2s, color 0.2s, border 0.2s;
  box-shadow: 0 2px 8px rgba(117, 193, 229, 0.06);
  &:hover {
    background: #75c1e5;

    color: #fff;
    border: 1.5px solid #539cd0;
  }

  &:hover img {
    filter: brightness(0) invert(1) drop-shadow(0 0 2px #fff);
  }

  @media (max-width: 767px) {
    width: 45%;
    height: 36px;
    padding: 0;

    font-size: 18px;
  }
`;

function getOffset(index, activeIndex, total, direction) {
  // -1: left, 0: center, 1: right, else: hidden
  if (index === activeIndex) return 0;
  if (index === (activeIndex - 1 + total) % total) return -1;
  if (index === (activeIndex + 1) % total) return 1;
  return 99;
}

function useIsMobile() {
  const [isMobile, setIsMobile] = useState(
    typeof window !== "undefined" ? window.innerWidth < 768 : false
  );
  useEffect(() => {
    function handleResize() {
      setIsMobile(window.innerWidth < 768);
    }
    window.addEventListener("resize", handleResize);
    return () => window.removeEventListener("resize", handleResize);
  }, []);
  return isMobile;
}

export default function WhyChooseUsCarousel() {
  const [activeIndex, setActiveIndex] = useState(0);
  const [direction, setDirection] = useState(1); // 1: next, -1: prev
  const isMobile = useIsMobile();
  const touchStartX = useRef(null);
  const [dragX, setDragX] = useState(0);
  const [isDragging, setIsDragging] = useState(false);

  // --- Gesture handlers with drag feedback ---
  function handleTouchStart(e) {
    setIsDragging(true);
    setDragX(0);
    touchStartX.current = e.touches ? e.touches[0].clientX : e.clientX;
  }
  function handleTouchMove(e) {
    if (touchStartX.current === null) return;
    const moveX = e.touches ? e.touches[0].clientX : e.clientX;
    setDragX(moveX - touchStartX.current);
  }
  function handleTouchEnd(e) {
    setIsDragging(false);
    if (touchStartX.current === null) return;
    const endX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
    const diff = endX - touchStartX.current;
    if (Math.abs(diff) > 40) {
      if (diff < 0) handleNext();
      else handlePrev();
    }
    setDragX(0);
    touchStartX.current = null;
  }
  function handleMouseDown(e) {
    setIsDragging(true);
    setDragX(0);
    touchStartX.current = e.clientX;
    window.addEventListener("mousemove", handleMouseMove);
    window.addEventListener("mouseup", handleMouseUp);
  }
  function handleMouseMove(e) {
    if (touchStartX.current === null) return;
    setDragX(e.clientX - touchStartX.current);
  }
  function handleMouseUp(e) {
    setIsDragging(false);
    handleTouchEnd(e);
    window.removeEventListener("mousemove", handleMouseMove);
    window.removeEventListener("mouseup", handleMouseUp);
  }

  const handlePrev = () => {
    setDirection(-1);
    setActiveIndex((prev) => (prev - 1 + slides.length) % slides.length);
  };
  const handleNext = () => {
    setDirection(1);
    setActiveIndex((prev) => (prev + 1) % slides.length);
  };

  // --- DRAG TRANSFORM CALC ---
  function getDragTransform(offset) {
    // Only center, left, right slides move with drag
    if (!isDragging) return undefined;
    if (offset === 0)
      return `translate(-50%, -50%) translateX(${dragX}px) scale(1.08)`;
    if (offset === -1)
      return `translate(calc(-50% - 260px + ${dragX}px), -50%) scale(0.93)`;
    if (offset === 1)
      return `translate(calc(-50% + 260px + ${dragX}px), -50%) scale(0.93)`;
    return undefined;
  }
  function getMobileDragTransform(offset) {
    if (!isDragging) return undefined;
    if (offset === 0)
      return `translate(-50%, -50%) translateX(${dragX}px) scale(1)`;
    if (offset === 1)
      return `translate(calc(-50% + 42vw + ${dragX}px), -50%) scale(0.85)`;
    if (offset === -1)
      return `translate(calc(-50% - 42vw + ${dragX}px), -50%) scale(0.85)`;
    return undefined;
  }

  return (
    <Section id="why" data-aos="fade-down">
      <Title>Почему выбирают нас?</Title>
      <SlidesWrapper
        onTouchStart={handleTouchStart}
        onTouchMove={handleTouchMove}
        onTouchEnd={handleTouchEnd}
        onMouseDown={handleMouseDown}
        style={{ userSelect: "none" }}
      >
        {slides.map((slide, idx) => {
          const offset = isMobile
            ? idx === activeIndex
              ? 0
              : Math.abs(
                  (idx - activeIndex + slides.length) % slides.length
                ) === 1
              ? (idx - activeIndex + slides.length) % slides.length === 1
                ? 1
                : -1
              : 99
            : getOffset(idx, activeIndex, slides.length, direction);
          const Icon = slide.icon;
          // Drag transform
          const dragTransform = isMobile
            ? getMobileDragTransform(offset)
            : getDragTransform(offset);
          return (
            <SlideStyled
              key={idx}
              $offset={offset}
              $direction={direction}
              style={dragTransform ? { transform: dragTransform } : undefined}
            >
              <Icon active={offset === 0} />
              <h3>{slide.title}</h3>
              <p>{slide.text}</p>
            </SlideStyled>
          );
        })}
      </SlidesWrapper>
      <ArrowsRow>
        <ArrowButton onClick={handlePrev} aria-label="Previous">
          <img src="/left.svg" alt="prev" />
        </ArrowButton>
        <ArrowButton onClick={handleNext} aria-label="Next">
          <img src="/right.svg" alt="next" />
        </ArrowButton>
      </ArrowsRow>
    </Section>
  );
}
